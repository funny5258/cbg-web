<?xml version="1.0" encoding="utf-8" ?>
<Configuration status="off" monitorInterval="1800">
    <properties>
        <!-- APP_NAME 严禁使用 - 符号，影响日志切分-->
        <property name="APP_NAME">mall.real.time</property>
        <property name="LOG_HOME">/data/logs/tx-stack</property>
        <!-- 时间(精确到时间毫秒) 线程号 应用号(每个应用唯一,写死) 日志级别 -traceId loggername 类名 方法名 -商家ID（可选）-商品ID（可选）-订单ID（可选）-扩展KEY（可选）-日志内容-->
        <property name="LOG_PATTERN">%d{YYYY/MM/dd-HH:mm:ss.SSS} %thread ${APP_NAME} %level -%X{unique} %logger{1} %class %method -%X{sellerId} -%X{itemId} -%X{orderId} -%X{ext} %m%n</property>
        <property name="DEPARTMENT">ds</property>
        <property name="TEAM">ds.bigdata</property>
    </properties>

    <Appenders>
        <Console name="Console" target="SYSTEM_OUT">
            <ThresholdFilter level="INFO" onMatch="ACCEPT" onMismatch="DENY"/>

        </Console>

        <RollingRandomAccessFile name="FILE-INFO" fileName="${LOG_HOME}/info.log"
                                 filePattern="${LOG_HOME}/info.log.%d{yyyy-MM-dd}">
            <Filters>
                <ThresholdFilter level="ERROR" onMatch="DENY" onMismatch="NEUTRAL"/>
                <ThresholdFilter level="INFO" onMatch="ACCEPT" onMismatch="DENY"/>
            </Filters>

            <Policies>
                <TimeBasedTriggeringPolicy modulate="true" interval="1"/>
            </Policies>
        </RollingRandomAccessFile>

        <RollingRandomAccessFile name="FILE-ERROR" fileName="${LOG_HOME}/error.log"
                                 filePattern="${LOG_HOME}/error.log.%d{yyyy-MM-dd}">
            <Filters>
                <ThresholdFilter level="ERROR" onMatch="ACCEPT" onMismatch="DENY"/>
            </Filters>


            <Policies>
                <TimeBasedTriggeringPolicy modulate="true" interval="1"/>
            </Policies>
        </RollingRandomAccessFile>
    </Appenders>

    <Loggers>
        <root level="INFO">
            <appender-ref ref="Console"/>
        </root>

        <logger name="com.funny.txstack"  additivity="false">
            <appender-ref ref="FILE-ERROR"/>
            <appender-ref ref="FILE-INFO"/>
        </logger>
    </Loggers>
</Configuration>